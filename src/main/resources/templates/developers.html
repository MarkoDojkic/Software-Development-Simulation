<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <title>Software development simulator - Developers page</title>
        <script type="module" src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.15.1/cdn/shoelace-autoloader.js"></script>
        <link rel="stylesheet" media="(prefers-color-scheme:light)" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.15.1/cdn/themes/light.css"/>
        <link rel="stylesheet" media="(prefers-color-scheme:dark)" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.15.1/cdn/themes/dark.css" onload="document.documentElement.classList.add('sl-theme-dark');"/>
        <style>
            :root {
                --numberOfColumns: -1;
                --aspect-ratio: -1;
            }

            .card-overview {
                height: 100%;
            }

            .carousel__slides--horizontal {
                overflow-y: scroll; !important
            }
        </style>
        <script>
            window.onload = onLoadFunctions;

            function onLoadFunctions() {
                onResize(null);
                setTimeout(() => {
                    document.querySelector("#sl-tab-panel-1 > sl-carousel").shadowRoot.querySelector("#scroll-container").style.setProperty("overflow-y", "auto");
                    console.log(document.querySelector("#sl-tab-panel-1 > sl-carousel").shadowRoot.querySelector("#scroll-container").style.getPropertyValue("overflow-y"));
                    document.querySelectorAll('.rating-developers').forEach(value => value.getSymbol = (() => '<sl-icon name="code-slash"></sl-icon>')); //Change icon for every sl-rating with class .rating-developers
                    clearTimeout(this);
                }, 500);
            }

            function onResize(_event) {

              if (outerWidth > 2100) {
                document.querySelector(':root').style.setProperty('--numberOfColumns', 6);
                document.querySelector('.custom-modifications').style.setProperty("--aspect-ratio", 16/9);
              } else if (outerWidth <= 2100 && outerWidth > 1920) {
                document.querySelector(':root').style.setProperty('--numberOfColumns', 5);
                document.querySelector('.custom-modifications').style.setProperty("--aspect-ratio", 16/9);
              } else if (outerWidth <= 1920 && outerWidth > 1500) {
                document.querySelector(':root').style.setProperty('--numberOfColumns', 4);
                document.querySelector('.custom-modifications').style.setProperty("--aspect-ratio", 16/9);
              } else if (outerWidth <= 1500 && outerWidth > 1100) {
                document.querySelector(':root').style.setProperty('--numberOfColumns', 3);
                document.querySelector('.custom-modifications').style.setProperty("--aspect-ratio", 4/3);
              } else if (outerWidth <= 1100 && outerWidth > 800) {
                document.querySelector(':root').style.setProperty('--numberOfColumns', 2);
                document.querySelector('.custom-modifications').style.setProperty("--aspect-ratio", 0.75);
              } else if (outerWidth <= 800) {
                document.querySelector(':root').style.setProperty('--numberOfColumns', 1);
                document.querySelector('.custom-modifications').style.setProperty("--aspect-ratio", 0.5);
              }
            }
        </script>
    </head>
    <body onresize="onResize()">
        <sl-tab-group>
            <sl-tab slot="nav" panel="tab-developers-view">Developers - View</sl-tab>
            <sl-tab slot="nav" panel="tab-developers-create">Developers - Create</sl-tab>
            <sl-tab slot="nav" panel="tab-developers-edit">Developers - Edit</sl-tab>
            <sl-tab slot="nav" onclick="location.href = '/developers#'">Developers - Recreate</sl-tab>
            <sl-tab slot="nav" onclick="location.href = '/'">Go to Home page</sl-tab>

            <sl-tab-panel name="tab-developers-view">
                <p th:if="${ #lists.isEmpty(developmentTeams) }">No developers found</p>
                <sl-carousel class="custom-modifications" pagination th:if="${ not#lists.isEmpty(developmentTeams) }">
                    <sl-carousel-item th:each="developmentTeam, iter : ${developmentTeams}" style="display: grid; grid-template-columns: repeat(var(--numberOfColumns), 1fr); height: 100%; row-gap: 1%; column-gap: 1%; text-align: center;">
                        <sl-card class="card-overview" th:each="developer, iter2 : ${developmentTeam}">
                            <strong th:text="${developer.personalId}"></strong><br /><br />
                            <span th:text="${developer.displayName}"></span><br /><br />
                            <i><small th:text="|Level #${developer.userType.ordinal}|"></small></i>
                            <th:block th:switch="${developer.userType.ordinal}">
                                <sl-badge th:case="1" th:text="${developer.userType.getDisplayName()}" variant="neutral"></sl-badge>
                                <sl-badge th:case="2" th:text="${developer.userType.getDisplayName()}" variant="primary"></sl-badge>
                                <sl-badge th:case="3" th:text="${developer.userType.getDisplayName()}" variant="success"></sl-badge>
                                <sl-badge th:case="4" th:text="${developer.userType.getDisplayName()}" variant="warning"></sl-badge>
                                <sl-badge th:case="5" th:text="${developer.userType.getDisplayName()}" variant="success"></sl-badge>
                                <sl-badge th:case="6" th:text="${developer.userType.getDisplayName()}" variant="danger"></sl-badge>
                            </th:block>
                            <div slot="footer">
                                <sl-rating th:value="${ ((developer.experienceCoefficient * developer.userType.seniorityCoefficient - 1) / (73.5 - 1)) * (12 - 1) + 1 }" max="12" readonly class="rating-developers"></sl-rating>
                            </div>
                        </sl-card>
                    </sl-carousel-item>
                </sl-carousel>
            </sl-tab-panel>
            <sl-tab-panel name="tab-developers-create">NOT IMPLEMENTED YET</sl-tab-panel>
            <sl-tab-panel name="tab-developers-edit">NOT IMPLEMENTED YET</sl-tab-panel>
        </sl-tab-group>
    </body>
</html>